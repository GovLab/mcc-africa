<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subfolder Test - MCC Africa</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
    .success { background-color: #d4edda; color: #155724; }
    .error { background-color: #f8d7da; color: #721c24; }
    .loading { background-color: #d1ecf1; color: #0c5460; }
    .data-item { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    .nav { margin-bottom: 20px; }
    .nav a { margin-right: 10px; }
  </style>
</head>
<body>
  <h1>Subfolder Data Loading Test</h1>
  
  <div class="nav">
    <a href="/">Home</a>
    <a href="/cities/">Cities</a>
    <a href="/topics/">Topics</a>
    <a href="/test-subfolder.html">This Test Page</a>
  </div>
  
  <div id="status" class="status loading">
    Loading data from subfolder...
  </div>
  
  <div id="home-page">
    <h2>Data Loading Test (from subfolder context)</h2>
    
    <div class="data-item">
      <h3>Cities Data</h3>
      <p>Loaded: <span id="cities-count">0</span> cities</p>
      <div id="cities-list"></div>
    </div>
    
    <div class="data-item">
      <h3>About Data</h3>
      <p>Loaded: <span id="about-count">0</span> items</p>
      <div id="about-list"></div>
    </div>
    
    <div class="data-item">
      <h3>Current Path</h3>
      <p>This page is being served from: <span id="current-path"></span></p>
    </div>
  </div>

  <script src='https://unpkg.com/vue@2.0.3/dist/vue.js'></script>
  <script src="https://unpkg.com/vue-meta/dist/vue-meta.min.js"></script>
  <script src="/js/mcc-offline.js"></script>
  
  <script>
    // Show current path
    document.getElementById('current-path').textContent = window.location.pathname;
    
    // Monitor Vue instance for data loading
    const checkData = setInterval(() => {
      const app = document.querySelector('#home-page').__vue__;
      if (app && app.dataLoaded) {
        clearInterval(checkData);
        
        // Update status
        document.getElementById('status').className = 'status success';
        document.getElementById('status').textContent = '✅ Data loaded successfully from subfolder!';
        
        // Update counts
        document.getElementById('cities-count').textContent = app.indexData.length;
        document.getElementById('about-count').textContent = app.aboutData.length;
        
        // Show sample data
        const citiesList = document.getElementById('cities-list');
        app.indexData.slice(0, 3).forEach(city => {
          citiesList.innerHTML += `<p>• ${city.name}, ${city.country}</p>`;
        });
        
        const aboutList = document.getElementById('about-list');
        if (app.aboutData[0]) {
          aboutList.innerHTML = `<p>• Promo video ID: ${app.aboutData[0].promo_video_id || 'None'}</p>`;
        }
      }
    }, 100);
    
    // Timeout after 10 seconds
    setTimeout(() => {
      clearInterval(checkData);
      const status = document.getElementById('status');
      if (status.className.includes('loading')) {
        status.className = 'status error';
        status.textContent = '❌ Data loading timed out. Check console for errors.';
      }
    }, 10000);
  </script>
</body>
</html> 